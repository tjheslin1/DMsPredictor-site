{"version":3,"sources":["simulation_form.js","serviceWorker.js","index.js"],"names":["SimulationForm","props","state","simulationName","simulationCount","focus","handleChange","bind","handlePlayerClassChange","handleSubmit","appendPlayer","appendMonster","event","target","value","type","checked","name","this","setState","index","charAt","length","document","getElementById","style","display","preventDefault","submittedPlayers","Array","from","children","map","playerDiv","playerOptions","stats","json","class","level","weapon","armour","offHand","skills","fightingStyle","submittedMonsters","monsterDiv","monsterOptions","monster","body","simulations","players","monsters","require","default","newClient","invokeUrl","region","invokeApi","headers","queryParams","then","result","console","log","data","window","location","href","catch","error","message","creatures","creatureIndex","newCreatureDiv","createElement","setAttribute","input","append","playerClassSelect","onchange","e","split","forEach","playerClass","option","innerHTML","toUpperCase","substring","fightingStylesSelect","levelSelect","weaponSelect","armourSelect","offHandSelect","appendModScore","score","select","className","id","onSubmit","placeholder","onChange","defaultValue","onClick","React","Component","Boolean","hostname","match","Index","exact","path","Results","useParams","undefined","simHash","apigClientFactory","apigClient","pathParams","simhashValue","JSON","stringify","Items","sim_hash","S","replace","queryDatabase","passQueryToUrl","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.be6ca374.chunk.js","sourcesContent":["import React from 'react';\n\nexport default class SimulationForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      simulationName: \"\",\n      simulationCount: 50,\n      focus: \"LowestFirst\"\n    };\n\n    this.handleChange             = this.handleChange.bind(this);\n    this.handlePlayerClassChange  = this.handlePlayerClassChange.bind(this);\n    this.handleSubmit             = this.handleSubmit.bind(this);\n    this.appendPlayer             = this.appendPlayer.bind(this);\n    this.appendMonster            = this.appendMonster.bind(this);\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handlePlayerClassChange(event) {\n    this.handleChange(event)\n\n    const target = event.target;\n    const index = target.name.charAt(target.name.length - 1)\n\n    if (target.value === \"fighter\") {\n      document.getElementById(\"players-\" + index + \"-fightingstyles\").style.display = \"inline\";\n    } else {\n      document.getElementById(\"players-\" + index + \"-fightingstyles\").style.display = \"none\";\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    var submittedPlayers = Array.from(document.getElementById(\"players\").children).map(playerDiv => {\n      const name = 0\n      const playerClass = 1\n      const fightingStyle = 2\n      const level = 3\n      const weapon = 4\n      const armour = 5\n      const offHand = 6\n\n      const str = 8\n      const dex = 9\n      const con = 10\n      const int = 11\n      const wis = 12\n      const cha = 13\n\n      var playerOptions = playerDiv.children\n\n      var stats = playerOptions[str].value + \",\" +\n      playerOptions[dex].value + \",\" +\n      playerOptions[con].value + \",\" +\n      playerOptions[int].value + \",\" +\n      playerOptions[wis].value + \",\" +\n      playerOptions[cha].value\n\n      var json = {\n        name: playerOptions[name].value,\n        class: playerOptions[playerClass].value,\n        level: playerOptions[level].value,\n        weapon: playerOptions[weapon].value,\n        armour: playerOptions[armour].value,\n        offHand: playerOptions[offHand].value,\n        stats: stats,\n        skills: \"0,0\"\n      };\n\n      if (playerOptions[playerClass].value === \"fighter\") {\n        json.fightingStyle = playerOptions[fightingStyle].value\n      }\n\n      return json;\n    })\n\n    var submittedMonsters = Array.from(document.getElementById(\"monsters\").children).map(monsterDiv => {\n      const name = 0\n      const monsterType = 1\n\n      var monsterOptions = monsterDiv.children\n\n      return {\n        name: monsterOptions[name].value,\n        monster: monsterOptions[monsterType].value\n      };\n    })\n\n    var simulation = {\n      simulationName: this.state.simulationName,\n      simulations: this.state.simulationCount,\n      focus: this.state.focus,\n      players: submittedPlayers,\n      monsters: submittedMonsters\n    };\n\n    // https://github.com/kndt84/aws-api-gateway-client\n    var apigClientFactory = require('aws-api-gateway-client').default;\n\n    let config = {\n      invokeUrl:'https://4zoom92ov5.execute-api.eu-west-2.amazonaws.com',\n      region: 'eu-west-2'\n    }\n\n    var apigClient = apigClientFactory.newClient(config);\n\n    var pathParams = {};\n    var pathTemplate = '/prod/simulator'\n    var method = 'POST';\n    var additionalParams = {\n      headers: {},\n      queryParams: {}\n    };\n\n    var body = simulation\n\n//    console.log(\"simulation = \" + JSON.stringify(simulation))\n\n    apigClient.invokeApi(pathParams, pathTemplate, method, additionalParams, body)\n      .then(function(result){\n        console.log(result.data);\n        window.location.href = '/results/' + result.data.body\n      }).catch( function(error){\n        console.log(error.message);\n      });\n  }\n\n  appendPlayer(event) {\n    var playerClasses = \"barbarian,cleric,fighter,rogue,wizard\"\n    var levels = \"1,2,3,4,5\"\n    var weapons = \"shortsword,greatsword,greataxe\"\n    var armours = \"noarmour,chainshirt\"\n    var offHands = \"none,shield,shortsword\"\n    var fightingStyles = \"archery,defense\"\n\n    const creatures = document.getElementById(\"players\")\n    const currentNumCreatures = creatures.children.length\n    const creatureIndex = currentNumCreatures + 1\n\n    this.setState({[`playerClass_${creatureIndex}`]: \"barbarian\"})\n\n    var newCreatureDiv = document.createElement(\"div\")\n    newCreatureDiv.setAttribute('id', 'players-' + creatureIndex)\n    newCreatureDiv.setAttribute('class', 'padded')\n\n    var input = document.createElement(\"input\");\n    input.setAttribute('type', 'text');\n    input.setAttribute('placeholder', 'enter player name');\n    input.setAttribute('name', 'players-' + creatureIndex + '-name');\n\n    newCreatureDiv.append(input)\n\n    var playerClassSelect = document.createElement(\"select\");\n    playerClassSelect.setAttribute('name', 'playerClass_' + creatureIndex);\n    playerClassSelect.onchange = (e) => this.handlePlayerClassChange(e);\n    playerClasses.split(',').forEach(function(playerClass) {\n      var option = document.createElement('option');\n      option.setAttribute('value', playerClass)\n      option.innerHTML = playerClass.charAt(0).toUpperCase() + playerClass.substring(1)\n\n      playerClassSelect.append(option)\n    })\n\n    var fightingStylesSelect = document.createElement(\"select\");\n    fightingStylesSelect.setAttribute('id', 'players-' + creatureIndex + \"-fightingstyles\");\n    fightingStylesSelect.setAttribute('name', 'players-' + creatureIndex + \"-fightingstyles\");\n    fightingStylesSelect.setAttribute('style', 'display: none;');\n    fightingStyles.split(',').forEach(function(fightingStyle) {\n      var option = document.createElement('option');\n      option.setAttribute('value', fightingStyle)\n      option.innerHTML = fightingStyle.charAt(0).toUpperCase() + fightingStyle.substring(1)\n\n      fightingStylesSelect.append(option)\n    })\n\n    var levelSelect = document.createElement(\"select\");\n    levelSelect.setAttribute('name', 'players-' + creatureIndex + \"-level\");\n    levels.split(',').forEach(function(level) {\n      var option = document.createElement('option');\n      option.setAttribute('value', level)\n      option.innerHTML = \"Level \" + level\n\n      levelSelect.append(option)\n    })\n\n    var weaponSelect = document.createElement(\"select\");\n    weaponSelect.setAttribute('name', 'players-' + creatureIndex + \"-weapon\");\n    weapons.split(',').forEach(function(weapon) {\n      var option = document.createElement('option');\n      option.setAttribute('value', weapon);\n      option.innerHTML = weapon.charAt(0).toUpperCase() + weapon.substring(1);\n\n      weaponSelect.append(option)\n    })\n\n    var armourSelect = document.createElement(\"select\");\n    armourSelect.setAttribute('name', 'players-' + creatureIndex + \"-armour\");\n    armours.split(',').forEach(function(armour) {\n      var option = document.createElement('option');\n      option.setAttribute('value', armour);\n      option.innerHTML = armour.charAt(0).toUpperCase() + armour.substring(1);\n\n      armourSelect.append(option)\n    })\n\n    var offHandSelect = document.createElement(\"select\");\n    offHandSelect.setAttribute('name', 'players-' + creatureIndex + \"-offHand\");\n    offHands.split(',').forEach(function(offHand) {\n      var option = document.createElement('option');\n      option.setAttribute('value', offHand);\n      option.innerHTML = offHand.charAt(0).toUpperCase() + offHand.substring(1);\n\n      offHandSelect.append(option)\n    })\n\n    newCreatureDiv.append(playerClassSelect)\n    newCreatureDiv.append(fightingStylesSelect)\n    newCreatureDiv.append(levelSelect)\n    newCreatureDiv.append(weaponSelect)\n    newCreatureDiv.append(armourSelect)\n    newCreatureDiv.append(offHandSelect)\n\n    newCreatureDiv.append(document.createElement(\"br\"))\n\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Str\"))\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Dex\"))\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Con\"))\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Int\"))\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Wis\"))\n    newCreatureDiv.append(this.appendModScore(creatureIndex, \"Cha\"))\n\n    creatures.append(newCreatureDiv)\n  }\n\n  appendModScore(creatureIndex, score) {\n    var input = document.createElement(\"input\");\n    input.setAttribute('type', 'text');\n    input.setAttribute('class', 'mod-score');\n    input.setAttribute('placeholder', score.charAt(0).toUpperCase() + score.substring(1));\n    input.setAttribute('name', 'players-' + creatureIndex + '-' + score);\n\n    return input\n  }\n\n  appendMonster(event) {\n    var monsterTypes = \"goblin,zombie,vampire,werewolf\"\n\n    const creatures = document.getElementById(\"monsters\")\n    const currentNumCreatures = creatures.children.length\n    const creatureIndex = currentNumCreatures + 1\n\n    var newCreatureDiv = document.createElement(\"div\")\n\n    var input = document.createElement(\"input\");\n    input.setAttribute('type', 'text');\n    input.setAttribute('placeholder', 'enter monster name');\n    input.setAttribute('name', 'monsters-' + creatureIndex + '-name');\n\n    newCreatureDiv.append(input)\n\n    var select = document.createElement(\"select\");\n    select.setAttribute('name', 'monsters-' + creatureIndex + \"-monsterType\");\n\n    monsterTypes.split(',').forEach(function(monster) {\n      var option = document.createElement( 'option' );\n      option.setAttribute('value', monster)\n      option.innerHTML = monster.charAt(0).toUpperCase() + monster.substring(1)\n\n      select.append(option)\n    })\n\n    newCreatureDiv.append(select)\n    creatures.append(newCreatureDiv)\n  }\n\n  render() {\n    return(\n      <div>\n        <a className=\"centered\" href=\"/results\">Click here to query simulation results</a>\n        <br />\n        <br />\n        <form id=\"simulationForm\" className=\"centered\" onSubmit={this.handleSubmit}>\n          <label>Simulation name:</label>\n          <input type=\"text\" placeholder=\"enter name here\" name=\"simulationName\" value={this.state.simulationName} onChange={this.handleChange} />\n          <br />\n          <label>\n            Number of simulation runs:\n            <input\n              name=\"simulationCount\"\n              type=\"number\"\n              value={this.state.simulationCount}\n              onChange={this.handleChange} />\n          </label>\n          <br />\n          Choose focus strategy (monsters will follow the same strategy):<br />\n          <select name=\"focus\" value={this.state.focus} onChange={this.handleChange}>\n            <option defaultValue value=\"LowestFirst\">Lowest health first (experienced players)</option>\n            <option value=\"RandomFocus\">Random (inexperienced players)</option>\n          </select>\n          <br />\n          <label>Players:</label>\n          <br />\n          <div id=\"players\">\n            <div id=\"players-1\" className=\"padded\">\n              <input type=\"text\" placeholder=\"enter player name\" name=\"players-1-name\" />\n              <select name=\"playerClass_1\" onChange={this.handlePlayerClassChange}>\n                <option defaultValue value=\"barbarian\">Barbarian</option>\n                <option value= \"cleric\">Cleric</option>\n                <option value= \"fighter\">Fighter</option>\n                <option value= \"rogue\">Rogue</option>\n                <option value= \"wizard\">Wizard</option>\n              </select>\n              <select id=\"players-1-fightingstyles\" name=\"players-1-fightingstyles\" style={{display: \"none\"}}>\n                <option defaultValue value= \"archery\">Archery</option>\n                <option value= \"defense\">Defense</option>\n              </select>\n              <select name=\"players-1-level\">\n                <option defaultValue value=\"1\">Level 1</option>\n                <option value= \"2\">Level 2</option>\n                <option value= \"3\">Level 3</option>\n                <option value= \"4\">Level 4</option>\n                <option value= \"5\">Level 5</option>\n              </select>\n              <select name=\"players-1-weapon\">\n                <option defaultValue value=\"shortsword\">Shortsword</option>\n                <option value= \"greatsword\">Greatsword</option>\n                <option value= \"greataxe\">Greataxe</option>\n              </select>\n              <select name=\"players-1-armour\">\n                <option defaultValue value=\"noarmour\">NoArmour</option>\n                <option value= \"chainshirt\">ChainShirt</option>\n              </select>\n              <select name=\"players-1-offHand\">\n                <option defaultValue value=\"none\">No Off Hand</option>\n                <option value=\"shield\">Shield</option>\n                <option value= \"shortsword\">Shortsword</option>\n              </select>\n              <br />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Str\" name=\"players-1-str\" />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Dex\" name=\"players-1-dex\" />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Con\" name=\"players-1-con\" />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Int\" name=\"players-1-int\" />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Wis\" name=\"players-1-wis\" />\n              <input type=\"text\" className=\"mod-score\" placeholder=\"Cha\" name=\"players-1-cha\" />\n            </div>\n          </div>\n          <button type=\"button\" onClick={this.appendPlayer}>Add Player</button>\n          <br />\n          <label>Monsters:</label>\n          <div id=\"monsters\">\n            <div id=\"monsters-1\">\n              <input type=\"text\" placeholder=\"enter monster name\" name=\"monsters-1-name\" />\n              <select name=\"monsters-1-monsterType\">\n                <option defaultValue value=\"goblin\">Goblin</option>\n                <option value= \"zombie\">Zombie</option>\n                <option value= \"vampire\">Vampire</option>\n                <option value= \"werewolf\">Werewolf</option>\n              </select>\n            </div>\n          </div>\n          <button type=\"button\" onClick={this.appendMonster}>Add Monster</button>\n          <br />\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SimulationForm from './simulation_form'\nimport * as serviceWorker from './serviceWorker';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  useParams\n} from \"react-router-dom\";\n\nReactDOM.render(<Index />, document.getElementById('root'));\n\nexport default function Index() {\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/\">\n            <SimulationForm />\n          </Route>\n          <Route path=\"/results/:id?\">\n            <Results />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\n// 100408825\n// 1251203534\n// 1418698956\n\nfunction Results() {\n  let { id } = useParams();\n\n  if (id !== null && id !== \"\" && id !== undefined) {\n    queryDatabase(id);\n\n//    console.log(\"TWO\")\n    return (\n      <div className=\"centered\" >\n        <h3 id=\"results-header\">waiting...</h3>\n        <form id=\"simulationResults\" onSubmit={(e) => {e.preventDefault(); passQueryToUrl(document.getElementById(\"simHash\").value)}}>\n          <input id=\"simHash\" type=\"text\" placeholder=\"enter simHash\" />\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n        <a href={`/results/${id}`}><i>refresh {id} results</i></a>\n      </div>\n    )\n  } else {\n//    console.log(\"THREE\")\n    return (\n      <div className=\"centered\" >\n        <h3 id=\"results-header\">Enter your simulation id:</h3>\n        <form id=\"simulationResults\" onSubmit={(e) => {e.preventDefault(); passQueryToUrl(document.getElementById(\"simHash\").value)}}>\n          <input id=\"simHash\" type=\"text\" placeholder=\"enter simHash\" />\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n        <a href='/results'>Refresh</a>\n      </div>\n    )\n  }\n}\n\nfunction passQueryToUrl(simHash) {\n  window.location.href = '/results/' + simHash\n}\n\nfunction queryDatabase(simHash) {\n  // https://github.com/kndt84/aws-api-gateway-client\n  var apigClientFactory = require('aws-api-gateway-client').default;\n\n  let config = {\n    invokeUrl:'https://4zoom92ov5.execute-api.eu-west-2.amazonaws.com',\n    region: 'eu-west-2'\n  }\n\n  var apigClient = apigClientFactory.newClient(config);\n\n  var pathParams = {\n    simhashValue: simHash\n  };\n\n  var pathTemplate = '/prod/query/{simhashValue}'\n  var method = 'GET';\n  var additionalParams = {\n    headers: {},\n    queryParams: {}\n  };\n\n  apigClient.invokeApi(pathParams, pathTemplate, method, additionalParams)\n    .then(function(result){\n      document.getElementById(\"results-header\").innerHTML = \"Your simulation id is: <div style=\\\"color: green\\\">\" + JSON.stringify(result.data.Items[0].sim_hash.S).replace(/\"/g, \"\") + \"</div><br/><i>make a note of it (or copy the full URL) to return to the results in the future.</i><br /><br/>Results: \"\n          + JSON.stringify(result.data.Items[0].result.S).replace(/\"/g, \"\").replace(/,/g, \" and\");\n    }).catch( function(error){\n      document.getElementById(\"results-header\").innerHTML = error.message\n      + '<br /><i style=\"color: red\">this is likely an unknown simulation ID</i>';\n    });\n}\n\nserviceWorker.unregister();\n"],"sourceRoot":""}